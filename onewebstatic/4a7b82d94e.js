!function($){$(window).on("view-chosen",(function(evt,isDesktop){var maxHeight=Math.max($(window).height(),window.innerHeight,document.documentElement.clientHeight);$((function(){var pinToBottomSelector=isDesktop?'[data-pin="-1"]':'[data-mobile-pin="-1"]',sorter=function(a,b){return a>b?1:a<b?-1:0},pinnedTopElements=$(isDesktop?'[data-pin="1"]':'[data-mobile-pin="1"]').sort((function(el1,el2){var el1Top=$(el1).offset().top,el2Top=$(el2).offset().top;return sorter(el1Top,el2Top)})),pinnedBottomElements=$(pinToBottomSelector).sort((function(el1,el2){var el1Bottom=$(el1).offset().top+$(el1).outerHeight(),el2Bottom=$(el2).offset().top+$(el2).outerHeight();return sorter(el1Bottom,el2Bottom)}));if(pinnedTopElements.length||pinnedBottomElements.length){$.fn.hasReachedElementTop=function(offset){var elementTop=$(this).offset().top;return $(window).scrollTop()+(offset||0)>=elementTop},$.fn.hasReachedElementBottom=function(offset){var elementBottom=$(this).offset().top+$(this).outerHeight();return $(window).scrollTop()+maxHeight-(offset||0)<=elementBottom};var mapPinToTopOffset={},mapPinToBottomOffset={},createOffsetMap=function(pinnedElements){var map={},previousSpacing=0;return pinnedElements.each((function(){var $this=$(this),dataId=$this.data("id");map[dataId]=previousSpacing,previousSpacing+=$this.outerHeight()})),map},getFloatingStripOffsetCorrectionMap=function(pinnedElements,cb){var map={};return pinnedElements.each((function(){var $this=$(this),dataId=$this.data("id"),pin=$this.data("pin"),isFloat=$this.parents(".float").first().length,baseComponentOfFloat=$this.parents(".row").first().find('>div:last-child [data-pin="'+pin+'"]');if(isFloat&&baseComponentOfFloat.length){var baseComponentId=$(baseComponentOfFloat).data("id"),baseComponentOfFloatOffset=$(baseComponentOfFloat).offset(),baseComponentOfFloatOffsetTop=baseComponentOfFloatOffset.top,baseComponentOfFloatOffsetBottom=baseComponentOfFloatOffset.top+$(baseComponentOfFloat).outerHeight(),floatOffsetTop=$this.offset().top,floatOffsetBottom=floatOffsetTop+$this.outerHeight();cb(baseComponentId,baseComponentOfFloatOffsetTop,baseComponentOfFloatOffsetBottom,dataId,floatOffsetTop,floatOffsetBottom,map)}})),map},mapPinToTopFloatingOffsetCorrection=getFloatingStripOffsetCorrectionMap(pinnedTopElements,(function(baseComponentId,baseComponentTop,baseComponentBottom,floatComponentId,floatComponentTop,floatComponentBottom,map){var diffOffset=0;baseComponentTop>=floatComponentTop?(diffOffset=floatComponentBottom-baseComponentTop,map[baseComponentId]=diffOffset):(diffOffset=baseComponentBottom-floatComponentTop,map[floatComponentId]=diffOffset)})),pinUpdaterFactory=function(filterFn,cb){return function(elements,mapOffset,mapOffsetCorrection){elements.each((function(){var dataId=$(this).data("id"),offset=mapOffset[dataId],offsetCorrection=mapOffsetCorrection[dataId]||0;filterFn.call(this,offset-offsetCorrection)&&cb.call(this,offset)}))}},unpinner=function(cssObj){var $this=$(this);$this.css(cssObj).removeClass("is-sticky"),$this.parents(".float").first().removeClass("sticky-wrapper"),$this.parent().css({height:"inherit"}).removeClass("sticky-wrapper"),$(window).trigger("on-unstick",[this])},pinner=function(cssObj){var $this=$(this);$this.addClass("is-sticky").css(cssObj),$this.parents(".float").first().addClass("sticky-wrapper"),$this.parent().css({height:$this.outerHeight()}).addClass("sticky-wrapper"),$(window).trigger("on-stick",[this])},unpinFromTopUpdater=pinUpdaterFactory((function(offset){var elementContainer=$(this).parent();return!$(elementContainer).hasReachedElementTop(offset)}),(function(){unpinner.call(this,{top:"unset"})})),unpinFromBottomUpdater=pinUpdaterFactory((function(offset){var elementContainer=$(this).parent();return!$(elementContainer).hasReachedElementBottom(offset)}),(function(){unpinner.call(this,{bottom:"unset"})})),pinToTopUpdater=pinUpdaterFactory((function(offset){var elementContainer=$(this).parent();return $(elementContainer).hasReachedElementTop(offset)}),(function(offset){pinner.call(this,{top:offset})})),pinToBottomUpdater=pinUpdaterFactory((function(offset){var elementContainer=$(this).parent();return $(elementContainer).hasReachedElementBottom(offset)}),(function(offset){pinner.call(this,{bottom:offset})})),reverseOrderPinToTopElements=$($(pinnedTopElements).get().reverse());mapPinToTopOffset=createOffsetMap(pinnedTopElements);var reverseOrderPinToBottomElements=$($(pinnedBottomElements).get().reverse());mapPinToBottomOffset=createOffsetMap(reverseOrderPinToBottomElements);var mapPinToBottomFloatingOffsetCorrection=getFloatingStripOffsetCorrectionMap(pinnedBottomElements,(function(baseComponentId,baseComponentTop,baseComponentBottom,floatComponentId,floatComponentTop,floatComponentBottom,map){var diffOffset=0;baseComponentTop>=floatComponentTop&&baseComponentBottom>floatComponentBottom?(diffOffset=floatComponentBottom-baseComponentTop,map[floatComponentId]=diffOffset):baseComponentTop<floatComponentTop&&baseComponentBottom<floatComponentBottom?(diffOffset=baseComponentBottom-floatComponentTop,map[baseComponentId]=diffOffset):baseComponentTop<=floatComponentTop&&baseComponentBottom>=floatComponentBottom&&(diffOffset=floatComponentBottom-baseComponentTop,map[floatComponentId]=diffOffset)})),updater=function(){maxHeight=Math.max($(window).height(),window.innerHeight,document.documentElement.clientHeight),unpinFromTopUpdater(reverseOrderPinToTopElements.filter(".is-sticky"),mapPinToTopOffset,mapPinToTopFloatingOffsetCorrection),unpinFromBottomUpdater(pinnedBottomElements.filter(".is-sticky"),mapPinToBottomOffset,mapPinToBottomFloatingOffsetCorrection),pinToTopUpdater(pinnedTopElements.filter(":not(.is-sticky)"),mapPinToTopOffset,mapPinToTopFloatingOffsetCorrection),pinToBottomUpdater(reverseOrderPinToBottomElements.filter(":not(.is-sticky)"),mapPinToBottomOffset,mapPinToBottomFloatingOffsetCorrection)};updater(),isDesktop&&$(window).scroll(updater).resize((function(){maxHeight=Math.max($(window).height(),window.innerHeight,document.documentElement.clientHeight);var checkChangeInHeight=function(map,elements){var newMapOffset=createOffsetMap(elements);return Object.keys(newMapOffset).some((function(key){return newMapOffset[key]!==map[key]}))?newMapOffset:null},newMapPinToTopOffset=checkChangeInHeight(mapPinToTopOffset,pinnedTopElements);newMapPinToTopOffset&&(mapPinToTopOffset=newMapPinToTopOffset);var newMapPinToBottomOffset=checkChangeInHeight(mapPinToBottomOffset,reverseOrderPinToBottomElements);newMapPinToBottomOffset&&(mapPinToBottomOffset=newMapPinToBottomOffset),unpinFromTopUpdater(reverseOrderPinToTopElements,mapPinToTopOffset,mapPinToTopFloatingOffsetCorrection),unpinFromBottomUpdater(pinnedBottomElements,mapPinToBottomOffset,mapPinToBottomFloatingOffsetCorrection),pinToTopUpdater(pinnedTopElements,mapPinToTopOffset,mapPinToTopFloatingOffsetCorrection),pinToBottomUpdater(reverseOrderPinToBottomElements,mapPinToBottomOffset,mapPinToBottomFloatingOffsetCorrection)}))}}))}))}(oneJQuery);